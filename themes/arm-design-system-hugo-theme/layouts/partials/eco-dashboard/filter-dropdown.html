
<!-- Hugo Process parameters first -->
{{$group_display_name := .title}}
{{$group_name := .title | urlize}}


<ads-expansion-panel is-default-expanded class="learning-path-filters u-padding-bottom-1">
    <span slot="toggle">{{.title}}</span>
    <div slot="content">
        <div class="u-flex u-flex-column">
            <ads-select id="dropdown-{{$group_name}}" 
                        class="ads-dropdown-style" 
                        level="secondary"
                        size="medium"
                        style="text-align:left;"
                        data-group-display-name="{{$group_display_name}}">
            </ads-select>
            <p id="{{$group_name}}-explaining" style="padding-top:16px;">
                Filter by category and view the category description here.
            </p>
        </div>
    </div>
</ads-expansion-panel>



<script>

    function selectChangeHandler(evt) {
        const all_path_cards = document.querySelectorAll('div.search-div');
    
        // Set page state to Browse, if not already
        setToBrowse();
    
        // Update the facet
        var item_name = evt.detail.value;
        var group_name  = document.querySelector('#dropdown-category').getAttribute('data-group-display-name');
        updateFacet(group_name,item_name);
      };


    (() => {



      const select = document.getElementById('dropdown-{{$group_name}}');
      select.addEventListener('selectChange', selectChangeHandler);
      
      //select.addEventListener('change', function() {
      //  console.log('Dropdown changed!');
      //  });


      select.items = [
        {{- range .items -}}
            {{/* URLIZE with changing / to - of category names */}}
            {{ $replaced := replace . "/" "__" }}
            {{ $urlized_name := $replaced | urlize }}

            {
                value: '{{$urlized_name}}',
                text: '{{.}}',
                type: 'option',
            },
        {{- end -}}
      ];
    })();
</script>